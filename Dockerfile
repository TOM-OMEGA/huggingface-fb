# ------------------------------
# ✅ 使用 Playwright 官方映像（已內建 Chromium + 所有依賴）
# ------------------------------
FROM mcr.microsoft.com/playwright/python:v1.48.0-jammy

# ------------------------------
# 設定工作目錄
# ------------------------------
WORKDIR /app

# ------------------------------
# 複製 requirements 並安裝 Python 套件
# ------------------------------
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ------------------------------
# 複製應用程式原始碼
# ------------------------------
COPY . .

# ------------------------------
# 設定環境變數
# ------------------------------
ENV PORT=8080
EXPOSE 8080

# ------------------------------
# ✅ 使用 start.sh 啟動
# ------------------------------
RUN chmod +x start.sh
CMD ["bash", "start.sh"]
